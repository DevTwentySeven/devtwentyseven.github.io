<!-- Barra de Watchlist -->
<div id="watchlist-bar" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: #000;
  color: #00ff00;
  font-family: 'Courier New', monospace;
  font-size: 14px;
  padding: 4px 0;
  white-space: nowrap;
  overflow: hidden;
  border-bottom: 1px solid #00ff00;
  z-index: 2;
">
  <div id="watchlist-content" style="
    display: inline-block;
    padding-left: 100%;
    animation: scroll-left 20s linear infinite;
  ">
    Loading tokens...
  </div>
</div>

<style>
  @keyframes scroll-left {
    0% { transform: translateX(0%); }
    100% { transform: translateX(-100%); }
  }
</style>

<script>
  // Lista de contratos que devem aparecer
  const tokenList = [
    "So11111111111111111111111111111111111111112", // SOL
    "9A2jUbgoDY97fruKHXvDd7eQiq4xvnW3By1BfH1Bwn9Y", // DEEP
    "J3oWJafxg8xmH5vvwBAVX99rmr8b7C9BxjmjaMgCpump",  // MAHA
    "AtPNZ3Rwcezea16xkjkxULzCMKpSbS2rVEirVfzrnEa6", // GOLD
    "vtUzXyowSMsNUwiZMLNufySoeW9ehaPAVr7YsYQpump", // MARV
    "FRsV3m924aGpLMuEekoo3JkkMt1oopaM4JY9ki5YLXrp"  // XVM
  ];

  // FunÃ§Ã£o para formatar valores (10k, 10m, 10b)
  function formatNumber(num) {
    if (num >= 1e9) return (num/1e9).toFixed(2) + "b";
    if (num >= 1e6) return (num/1e6).toFixed(2) + "m";
    if (num >= 1e3) return (num/1e3).toFixed(2) + "k";
    return num.toString();
  }

  async function loadWatchlist() {
    try {
      // Consulta DexScreener API
      const url = `https://api.dexscreener.com/latest/dex/tokens/${tokenList.join(",")}`;
      const res = await fetch(url);
      const data = await res.json();

      const tokens = data.pairs || [];
      const content = tokens.map(t => {
        const mc = t.fdv ? `$${formatNumber(t.fdv)}` : "N/A";
        const change = t.priceChange?.h1 || 0;
        const color = change >= 0 ? "#00ff00" : "#ff3333";
        const icon = t.info?.imageUrl ? `<img src="${t.info.imageUrl}" width="14" style="vertical-align:middle;margin-right:4px;">` : "ðŸ’°";

        return `<span style="margin-right: 2rem;">${icon} <strong>${t.baseToken.symbol}</strong> ${mc} <span style="color:${color};">${change}%</span></span>`;
      }).join("");

      document.getElementById("watchlist-content").innerHTML = content;
    } catch (err) {
      console.error("Erro carregando watchlist:", err);
    }
  }

  // Atualiza a cada 60s
  loadWatchlist();
  setInterval(loadWatchlist, 60000);
</script>
